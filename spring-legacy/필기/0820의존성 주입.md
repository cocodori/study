# ì˜ì¡´ì„± ì£¼ì…ì˜ ì„¸ ê°€ì§€ ë°©ì‹

ìŠ¤í”„ë§ DIì—ëŠ” ì„¸ ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.
- setë©”ì„œë“œ ì£¼ì…
- í•„ë“œ ì£¼ì…
- ìƒì„±ì ì£¼ì…

ì´ ì¤‘ì—ì„œ í•„ë“œ ì£¼ì…ì´ ì‚¬ìš©í•˜ê¸° ê°€ì¥ ê°„ë‹¨í•˜ì§€ë§Œ, ìƒì„±ì ì£¼ì…ì„ ì‚¬ìš©í•˜ë¼ê³  ê¶Œì¥ë˜ê³  ìˆë‹¤. [ì°¸ê³ ](https://zorba91.tistory.com/238)

ì„¸ ê°€ì§€ ëª¨ë‘ í…ŒìŠ¤íŠ¸ í•´ ë³¼ ê²ƒì´ë‹¤.


## íë¦„

Marketì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ , ë§ˆì¼“ì—ì„œ íŒë§¤í•  ìƒí’ˆì¸ ê³ ê¸°ì™€ ì•¼ì±„, ìŠ¤ë‚µ í´ë˜ìŠ¤ë¥¼ ì£¼ì…í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³¼ ê²ƒì´ë‹¤. Lombokê³¼ spring-test ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•  ê²ƒì´ë‹¤. ğŸ“–[ìŠ¤í”„ë§ ì„¤ì • ì°¸ê³ ](https://velog.io/@cocodori/Spring-5.0-Setting-Lombok)


## ìƒí’ˆ

ë§ˆì¼“ì—ì„œ íŒë§¤í•  ê³ ê¸°ì™€ ì•¼ì±„ë¥¼ í´ë˜ìŠ¤ë¡œ ì •ì˜í•œë‹¤.
```java
@Component
@ToString
public class Vegetable {
}

@Component
@ToString
public class Snack {
}

@Component
@ToString
public class Meat {
}

```

ê°„ë‹¨íˆ í…ŒìŠ¤íŠ¸ë§Œ í•  ê²ƒì´ë¯€ë¡œ ë‹¤ë¥¸ ì½”ë“œëŠ” ì‘ì„±í•˜ì§€ ì•Šì•˜ë‹¤.
@ComponentëŠ” í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê² ë‹¤ê³  ëª…ì‹œí•˜ëŠ” ê²ƒì´ë‹¤.

## ë§ˆì¼“

ë§ˆì¼“ì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³  ê³ ê¸°ì™€ ì•¼ì±„, ìŠ¤ë‚µì„ ë©¤ë²„ë¡œ ì„ ì–¸í•œë‹¤.

```java
package com.coco.sample;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import lombok.Data;

@Component
@Getter
@ToString
@RequiredArgsConstructor
public class Market {
	//í•„ë“œ ì£¼ì…
	@Autowired
	private Meat meat;
	
	//set ë©”ì„œë“œ ì£¼ì…
	@Setter(onMethod_ = {@Autowired})
	private Vegetable vegetable;
	
	//ìƒì„±ì ì£¼ì…
	private final Snack snack;
}
```

## ì˜ì¡´ì„± ì£¼ì…(DI) í…ŒìŠ¤íŠ¸

Marketí´ë˜ìŠ¤ì—ì„œ Meat, Vegetableì„ ì„ ì–¸ë§Œ í•˜ê³  ì´ˆê¸°í™”ëŠ” í•˜ì§€ ì•Šì•˜ë‹¤.
ëŒ€ì‹  ê°ê° @Autowirtedë¥¼ ë¶™ì˜€ì„ ë¿ì´ë‹¤.

```java
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {RootConfig.class})
@Log4j
public class MarketTest {
	
	@Autowired
	private Market market;
	
	@Test
	public void testExist() {
		
		assertNotNull(market);
		log.info(market);
		log.info(market.getMeat());
		log.info(market.getVegetable());
		log.info(market.getSnack());

	}
}
```

ê²°ê³¼ëŠ”?

    INFO : com.coco.sample.MarketTest - Market(meat=Meat(), vegetable=Vegetable())
    INFO : com.coco.sample.MarketTest - Meat()
    INFO : com.coco.sample.MarketTest - Vegetable()
    INFO : com.coco.sample.MarketTest - Snack()


í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ì—ì„œë„ Marketí´ë˜ìŠ¤ë¥¼ ë©¤ë²„ë¡œ ì„ ì–¸ë§Œ í•˜ê³ , ì´ˆê¸°í™”ëŠ” í•˜ì§€ ì•Šì•˜ë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì •ìƒì ìœ¼ë¡œ ê°ì²´ê°€ ìƒì„±ë˜ì—ˆê³ , Marketí´ë˜ìŠ¤ì— ì„ ì–¸ë§Œ í•´ë’€ë˜ Meat,Vegetable,Snack ê°ì²´ ëª¨ë‘ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ê²ƒì´ **ì˜ì¡´ì„± ì£¼ì…**ì´ë‹¤.
 ìƒì„±ì ì£¼ì…ì„ ê¶Œì¥í•˜ëŠ” ì´ìœ ëŠ”, ê°ì²´ ìƒì„± ì‹œì— ì˜ì¡´ì„± ì£¼ì…ì´ ì´ë£¨ì–´ì§€ë¯€ë¡œ ì¢€ ë” ì—„ê²©í•˜ê²Œ ì˜ì¡´ì„± ì£¼ì…ì„ ì²´í¬í•œë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.
 ```@RequireArgsContructor```ë¥¼ ì´ìš©í•´ì„œ ë‹¨ì¼ ìƒì„±ìì˜ ë¬µì‹œì  ìë™ ì£¼ì… ê¸°ëŠ¥ì„ ì´ìš©í–ˆë‹¤. ì§ì ‘ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì„œ ```@Autowired```ë¥¼ ë¶™ì—¬ë„ ìƒê´€ì€ ì—†ë‹¤.
 ```@RequireArgsConstructor```ëŠ” ```@NonNull``` ë˜ëŠ” ```final```ì´ ë¶™ì€ ì¸ìŠ¤í„´ìŠ¤ë“¤ì˜ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” Lombokì˜ ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.

### í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ì˜ ì–´ë…¸í…Œì´ì…˜

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {RootConfig.class})
@Log4j
```

- @RunWith
  - í…ŒìŠ¤íŠ¸ ì‹œ í•„ìš”í•œ í´ë˜ìŠ¤ë¥¼ ì§€ì •í•œë‹¤.
  ìŠ¤í”„ë§ì€ SpringJUnit4ClassRunnerí´ë˜ìŠ¤ê°€ ëŒ€ìƒì´ë‹¤.

- @ContextConfiguration
  - ì‹¤í–‰ë˜ë©´, ì–´ë–¤ ì„¤ì • ì •ë³´ë¥¼ ì½ì–´ë“¤ì—¬ì•¼ í•˜ëŠ”ì§€ ëª…ì‹œí•œë‹¤.

- @Log4j 
  - Lombokì„ ì´ìš©í•´ì„œ ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ëŠ” Loggerë¥¼ ë³€ìˆ˜ë¡œ ìƒì„±í•œë‹¤.
  Loggerë¥¼ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šì•„ë„ ë¡œê·¸ë¥¼ ê¸°ë¡í•  ìˆ˜ ìˆë‹¤.
  
## ë™ì‘ ë°©ì‹

1. ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
í”„ë¡œì íŠ¸ê°€ ì‹¤í–‰ë˜ë©´ ê°€ì¥ ë¨¼ì € ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ëœë‹¤.

2. ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ëŠ” root-context.xml ë˜ëŠ” xmlì„ ëŒ€ì²´í•˜ëŠ” ì„¤ì • í´ë˜ìŠ¤ ì½ì–´ì„œ ìì‹ ì´ ìŠ¤ìº”í•´ì•¼ í•  íŒ¨í‚¤ì§€ë¥¼ ì°¾ëŠ”ë‹¤.
  ```
 ComponentScan(basePackages = {"com.coco.sample"})
  ```
ì§€ì •í•œ íŒ¨í‚¤ì§€ì˜ í´ë˜ìŠ¤ë“¤ ì¤‘ì—ì„œ @Componentê°€ ë¶™ì€ í´ë˜ìŠ¤ë§Œ ìŠ¤í”„ë§ì˜ Beanìœ¼ë¡œ ë“±ë¡í•œë‹¤.
ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ëŠ” Beanìœ¼ë¡œ ë“±ë¡ëœ í´ë˜ìŠ¤ë“¤ë§Œ ê´€ë¦¬í•œë‹¤.

3. ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ëŠ” ë¹ˆì„ ê´€ë¦¬í•˜ë©´ì„œ, í•„ìš”í•˜ë‹¤ëŠ” ìš”ì²­(@Autowired)ì„ ë°›ìœ¼ë©´ ì•Œë§ì€ ë¹ˆì„ ì°¾ì•„ì„œ ì£¼ì…í•œë‹¤.



